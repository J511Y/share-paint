# PM VALIDATION BOARD (share-paint)

> 공지: 현재 OpenClaw gateway 토큰 미스매치(`device token mismatch`)로 `sessions_spawn`이 동작하지 않아, PM가 직접/수동 관리 모드로 운영합니다.

## 0) 지금까지 산출물 기준 진행도 스냅샷

- 핵심 MVP 기능은 완료(드로잉/피드/좋아요/팔로우/댓글/랜덤주제/배틀)으로 문서화됨 (`progress.md`, `ROADMAP.md`).
- 다만 아래 항목은 **체크리스트 미완료** 상태가 큼:
  - Release Gate 항목: 기능 완성도/안정성/보안/관측성/운영준비
  - Phase A~D의 품질/성능/운영 준비 항목
  - Workstream TODO(Frontend, Backend/API, Realtime, QA, DevOps) 일부 진도 미체크
- 현재 `node_modules` 미설치로 로컬 자동검증(lint/test/build) 실행이 아직 안 됨.

## 1) PM에게 바로 위임할 작업 (요청한 "진행도 + 유효검증")

### A. 진행도 정합성 점검
1. `ROADMAP.md`의 모든 체크박스 상태를 `todo / in-progress / block / done`로 재정렬
2. `plan/progress.md`를 ROADMAP 기준으로 동기화
   - 새로 끝난 항목은 날짜와 PR/커밋 근거 추가
   - `in-progress` 항목은 의존성+차단요인+예정 완료일 기재
3. `주간 업데이트 규칙` 준수 (금요일 기준)

### B. 유효검증(Validation) 할당
- **PM 승인 기준 템플릿**을 아래와 같이 고정:
  - 목표 시나리오 수행 여부(성공/실패)
  - 실패 케이스 재현성(재현 가능 여부 + 로그/재현 단계)
  - 성능 지표 충족 여부
  - 보안/권한 점검 여부
  - 배포/롤백 문서화 여부

### C. 이번 주 스프린트 스코프 제안
- **제한 스코프(핵심만)**
  1. 핵심경로 E2E(로그인→드로잉→저장→피드→좋아요/댓글→배틀) 1회 완주
  2. 배틀 네트워크 이슈 대응 3개 시나리오(재접속/중복접속/방장이탈)
  3. API 에러 응답 포맷 통일 + 최소 재시도 정책
  4. 배포/롤백 체크리스트 1판 완성

## 2) 즉시 실행 유효검증 체크리스트 (PM 체크 인용)

### 기능 검증
- [ ] 핵심 경로 1회 통합 시나리오 통과 여부
- [ ] 모바일 드로잉 터치(펜/지우개/색상 변경/저장)에서 오작동 0건
- [ ] 피드/댓글/좋아요/팔로우 동작에서 중복 요청 방지
- [ ] 랜덤주제 API 실패 시 대체 동작(알림+재시도)

### 안정성 검증
- [ ] 배틀 중 이탈/재접속 2회 이상 반복 테스트 통과
- [ ] 타이머 동기화 오차 허용치 정의 후 측정
- [ ] 방 상태(대기/진행/완료) 전이 정확성 확인

### 보안/권한
- [ ] API 경로별 인증 가드 목록 점검
- [ ] Supabase RLS 정책/스토리지 정책 누락 항목 정리
- [ ] .env/서비스키 노출 체크(문서화)

### 품질·운영
- [ ] 핵심 API 응답 포맷 및 사용자 메시지 정책 통일
- [ ] Socket 에러/저장 실패/인증 실패 로그 기준 정의
- [ ] 장애 대응(온콜/역할/채널/롤백 기준) 작성

## 3) PM 리포트 형식(일일)

- **진행도**: (done / in-progress / blocked) 요약 5줄
- **검증결과**: 항목별 Pass/Fail + 근거 스크린샷/로그 경로
- **리스크**: 영향도 높음 상위 3개 + 대응안
- **다음 액션**: 다음 작업 3개 + 책임자

## 4) 게이트웨이 해결 후 전환안
- `sessions_spawn`으로 PM/Backend/Frontend/DevOps 실제 위임 재개
- PM 승인 전 `TEAM.md`의 형식(목표/산출물/제약/Acceptance) 준수
- 각 결과를 이 문서에 링크로 반영

## 5) Linear API 조회 결과 (요청 기반 정렬)

조회 기준: `Paint-share` 팀, API 직접 조회 (상태/우선순위/링크)

### 리뷰 상태 이슈
- 현재 정의된 상태 집합: `Backlog`, `Todo`, `Done` (현재 `In Progress` 없음)
- **리뷰 상태 이름을 가진 이슈는 현재 없음**
  - `review` 키워드 검색 시 결과 0건

### 오늘 착수 우선 후보 (Backlog 우선, 우선순위 desc)
- `PAI-10` High `E6 - E2E/성능 예산 운영`
- `PAI-11` High `E7 - 배포/환경 분리/런북`
- `PAI-13` High `PS-E1-01 CanvasActions 테스트 라벨 정합화`
- `PAI-14` High `PS-E1-02 DrawingCanvas App Router mock 정리`
- `PAI-16` High `PS-E1-04 CI test:run 필수 게이트화`
- `PAI-18` High `PS-E2-01 터치 이벤트 좌표 정밀도 개선`
- `PAI-19` High `PS-E2-02 캔버스 리렌더/메모리 튜닝`
- `PAI-22` High `PS-E3-01 socket.id <-> user.id 매핑 정식화`
- `PAI-23` High `PS-E3-02 재연결 상태복구 프로토콜 추가`
- `PAI-24` High `PS-E3-03 ACK/idempotency/timeout 정책 구현`

> 실제 Top10은 [priority 라벨 기준 정렬 + Backlog 필터].
> 참고: 위 목록은 API 응답 기준으로 실시간 정렬한 값이며, 실제 PM 우선순위는 의존성/리스크 반영해 재조정 권장

## 6) 오늘 착수용 에픽 묶음 (권장 3개)

### 에픽 1: 실서비스 신뢰성(우선)
- `PAI-23` 배틀 재연결 상태복구 프로토콜 추가
- `PAI-24` ACK/idempotency/timeout 정책 구현
- `PAI-22` socket.id <-> user.id 매핑 정식화
- **목표**: 배틀 이탈/중복/타임아웃 시 상태일관성 회복 실패율 0%에 가깝게 개선
- **검증**: 재접속 3회 연속, 중복 이벤트 100회 노이즈 주입 시 이벤트 드랍/중복 처리 정책이 일관되는지 확인
- **권장 상태 변경**: `Backlog` → `Todo` (순차 시작)

### 에픽 2: 품질 게이트 강화(최소)
- `PAI-16` CI test:run 필수 게이트화
- `PAI-10` E2E/성능 예산 운영
- `PAI-14` DrawingCanvas App Router mock 정리
- **목표**: 핵심 파이프라인에서 회귀 방지와 빌드 게이트 자동화
- **검증**: `test:run` 및 핵심 API/클라이언트 회귀 테스트가 기본 PR 문턱으로 작동

### 에픽 3: 출시 전 운영 준비
- `PAI-11` 배포/환경 분리/런북
- `PAI-13` CanvasActions 테스트 라벨 정합화 *(필요 시 병렬 가능)*
- **목표**: dev/stage/prod 분리의 운영기반 정합성 확보
- **검증**: 배포 체크리스트 1판 완성 + 롤백 트리거/책임자 1회 시나리오 점검

**오늘 액션**: 위 3개 에픽에서 **PAI-23/24/10**를 우선 진입 과제로 고정(성공 기준이 명확하고 출시에 직접 영향 큼).
## 6) 수동 실행 착수 반영 (2026-02-18)
- `sessions_spawn` 미동작으로 에이전트 위임은 보류 상태.
- 대신 `TODAY-EXECUTION-ORDER.md`에 오더-01~03 수동 수행 계획 반영.
- 실제 코드 착수:
  - `socket-server/server.js` ACK 응답 레이어 1차 적용
  - `src/hooks/useBattle.ts` 클라이언트 ACK 기반 에러 처리 적용
