# Paint-share Sprint Spec (Draft)

- Team: **PAI (Paint-share)**
- Sprint window (KST): **2026-02-20 ~ 2026-02-27 (1 week)**
- Status: **Draft (Cycle 생성 전 사전 스펙)**

## 1) Sprint Goal
1. 실시간 배틀 안정성 확보 (재연결 / ACK / idempotency)
2. 품질 게이트 고정 (CI test:run 필수화)
3. 배포 운영 준비 (환경 분리/런북)

## 2) Success / Fail Criteria
### Success
- Must 이슈 중 핵심 6개 이상 `Done` 또는 `In Review`
- PAI-22/23/24의 재연결/중복이벤트/timeout 시나리오 검증 통과
- PAI-16 CI `test:run` 필수 게이트 적용
- PAI-11 배포/롤백 런북 초안 승인

### Fail
- PAI-22/23/24 미완료
- CI 게이트 미적용
- 운영 런북 부재
- 스프린트 종료 시 Done 전환율 저조(50% 미만)

## 3) Scope
### Must (이번 스프린트)
- PAI-22 — socket.id <-> user.id 매핑 정식화
- PAI-23 — 재연결 상태복구 프로토콜 추가
- PAI-24 — ACK/idempotency/timeout 정책 구현
- PAI-10 — E2E/성능 예산 운영
- PAI-16 — CI test:run 필수 게이트화
- PAI-11 — 배포/환경 분리/런북
- PAI-13 — CanvasActions 테스트 라벨 정합화
- PAI-14 — DrawingCanvas App Router mock 정리

### Should (Must 70% 이상 진척 시 착수)
- PAI-27 — API 에러 응답 스키마 통일
- PAI-28 — API 입력 검증(zod) 보강
- PAI-40 — dev/staging/prod 환경 분리
- PAI-42 — 배포/롤백 런북 확정

### Could (이번 스프린트 제외 권고)
- 모바일 폴리싱/검증: PAI-18,19,20,21
- 런치 관측 고도화: PAI-44,45,12
- 문서/운영 부가: PAI-46,39,17
- 템플릿성 TODO: PAI-1~4

## 4) Role Allocation Spec
- planner: 스프린트 보드/WIP 제한/의존성 맵/데일리 버닝 리포트
- arch: ACK/idempotency/timeout 계약 및 상태전이 정의
- backend: 실시간 안정성 구현(22/23/24) + CI 연동 지원(16)
- frontend: 테스트 신뢰성 개선(13/14) + E2E 지원(10)
- devops: CI 게이트(16), 배포/롤백 런북(11), 환경분리 계획(40/42)
- reviewer: Must 이슈 전부 품질 게이트(PASS/CONDITIONS/BLOCK)

## 5) Operating Rules (Mandatory)
1. **Linear 이슈 생성 → 작업 내용(요구/DoD) 작성 → 브랜치 생성/작업 시작**
2. 브랜치 이름은 반드시 **`feature/{LINEAR-ISSUE-ID}`**
   - 예: `feature/PAI-13`
3. PR 본문에 해당 **Linear 이슈 링크 필수**
4. WIP 제한: Must 범위 내 동시 진행은 팀 기준 최대 8

## 6) Dependency & Risk Notes
- 선행조건: Active Cycle 생성 및 Must 이슈 매핑
- 현재 리스크: In Progress 이슈 다수에 assignee 비어 있음 (즉시 배정 필요)
- 우선순위 원칙: 보안/성능/운영 위험 > 핵심기능 > 편의성

## 7) First Actions Checklist
- [ ] Linear에 Active Cycle 생성 (2026-02-20 ~ 2026-02-27)
- [ ] Must 8개 이슈를 Cycle에 연결
- [ ] 각 Must 이슈 assignee 지정
- [ ] 각 이슈에 DoD 체크리스트 업데이트
- [ ] 에이전트별 handoff 발행 (planner/arch/backend/frontend/devops/reviewer)
