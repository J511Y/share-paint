# 랜덤 주제 생성 시스템 구현 계획

## 개요
사용자가 그림을 그릴 때 무엇을 그릴지 고민하지 않도록 랜덤한 주제를 제공하는 시스템입니다. 카테고리와 난이도별로 필터링하여 주제를 받을 수 있습니다.

## 데이터베이스 스키마 (기존 `topics` 테이블 활용)
- `content`: 주제 내용 (예: "우주를 여행하는 고양이")
- `category`: 카테고리 (사물, 동물, 풍경, 추상, 인물 등)
- `difficulty`: 난이도 (easy, normal, hard)

## 구현 목표

### 1. 데이터 시딩
- 초기 주제 데이터 50~100개 확보 및 `seed.sql` 작성
- 다양한 카테고리와 난이도 포함

### 2. API 구현
- `GET /api/topics/random`: 랜덤 주제 1개 반환
  - Query Params: `category` (optional), `difficulty` (optional)
- (Optional) `POST /api/topics`: 사용자 제보 주제 등록

### 3. UI 통합
- **드로잉 페이지 (`/draw`)**:
  - 상단에 "오늘의 주제" 섹션 추가
  - [새로운 주제] 버튼으로 다시 뽑기 기능
  - 주제 고정/잠금 기능 (선택 시 해당 주제로 저장됨)
- **대결방 생성 모달**:
  - 주제 입력란 옆에 [랜덤 주제] 버튼 추가

## 상세 프로세스

1. **시딩 데이터 준비**: ChatGPT 등을 활용하여 다양한 주제 생성
2. **API 개발**: `order('random()')` 활용 (Supabase/PostgreSQL 기능)
3. **클라이언트 훅**: `useRandomTopic` 커스텀 훅 개발
4. **컴포넌트 개발**: `TopicSelector` 컴포넌트 개발 및 적용

## 예상 이슈
- **중복 최소화**: 로컬 스토리지에 최근 본 주제 ID를 저장하여 클라이언트 단에서 필터링하거나 API 요청 시 제외 목록 전송
- **성능**: `ORDER BY random()`은 데이터가 많을 때 느릴 수 있으나, 현재 규모(수천 개 이하)에서는 문제없음. 추후 `TABLESAMPLE` 방식 고려.
