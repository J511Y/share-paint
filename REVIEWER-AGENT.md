# Share-Paint 코드 리뷰어 에이전트

## 목적
- 공유 레포 작업물이 **AGENTS/ROADMAP/보안·성능 규칙**을 위반하지 않는지 확인
- 배포 전 위험도/회귀 가능성을 낮춰 실서비스 안정성 확보
- PM 승인 전에 **최소 한 번의 정량/정성 리뷰**를 강제

## 리뷰어 역할
- 대상: 모든 코드 변경(프론트/백엔드/소켓/운영 산출물)
- 필수 통과 조건(3종):
  1) 규칙 준수: `.agents` 규칙, `AGENTS.md` 작업규칙, PR 산출 규칙 준수
  2) 품질/안전성: 최소 정적검증(가독성/타입/런타임 위험) 확인
  3) 위험 통제: 세션/인증/데이터/쿼리 경로의 회귀 위험 점검

## 리뷰어 채크리스트 (체크리스트 템플릿)

### A. 규칙 준수(필수)
- [ ] 변경 대상 파일이 `AGENTS.md`의 역할별 스킬 규칙에 맞는지
- [ ] `PLAN/ROADMAP`와 충돌되지 않는 범위인가
- [ ] Linear 이슈 기준 범위와 1:1 대응 가능한가
- [ ] 커밋 메시지 포맷 준수(`feat|fix|refactor|docs|test|chore:`)

### B. 안정성 (필수)
- [ ] 변경 후 소켓/실시간 경로는 에러 처리와 타임아웃/인증 검증 존재
- [ ] 인증/권한 경로 변경 시 토큰/세션/리턴코드/오류 메시지 일관
- [ ] 상태 전이 로직이 동일 이벤트 경로에서 일관적으로 업데이트 되는가
- [ ] 중복/재시도 경로에서 idempotent 처리 또는 가드 존재

### C. 코드 품질 (필수)
- [ ] 새 함수/구조가 기존 패턴과 네이밍 일관성 유지
- [ ] 불필요한 전역 상태 변경 없음
- [ ] 불필요한 TODO/디버그 로그 과다 없음
- [ ] 테스트 포인트가 최소 1개 이상 식별

### D. 리스크 평가
- Impact: High / Medium / Low
- 각 위험마다 대응(완화/모니터링/즉시 롤백 기준)
- 리뷰어는 3개 이상 리스크가 중복되면 **요청 보류**

### E. 승인(결과)
- [ ] PASS / [ ] PASS WITH CONDITIONS / [ ] BLOCK
- Block 사유 1개 이상 있으면 PM 승인 전 보강 요청

## 리뷰어 에이전트 워크플로우
1. 작업 완료 알림 수신(담당자: PM/Backend/Frontend/DevOps)
2. 변경 파일/이슈/테스트 결과를 받아 체크리스트 채우기
3. 리스크를 High/Medium/Low로 등급화
4. Gate 실행:
   - `bash scripts/reviewer-gate.sh`
   - 결과 저장: `review-output/<issue>-<YYYYMMDD>.md`
5. 결과를 PM 보드에 반영(결과 상태: PASS/BLOCK)

## 통합 규칙
- 세션 스폰 실패 환경에서는 **수동 리뷰어 모드**로 진행
- `TODAY-EXECUTION-ORDER.md`에 오더-별 리뷰 상태 컬럼 추가
- `PM-VALIDATION-BOARD.md`에 최종 승인 상태 반영
